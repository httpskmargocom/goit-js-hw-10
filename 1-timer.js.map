{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst startBttn = document.querySelector(\"[data-start]\");\n\nconst daysElem = document.querySelector(\"[data-days]\");\nconst hoursElem = document.querySelector(\"[data-hours]\");\nconst minutesElem = document.querySelector(\"[data-minutes]\");\nconst secondsElem = document.querySelector(\"[data-seconds]\");\n\nstartBttn.disabled = true;\n\nlet userSelectedDate = null;\nlet timerId = null;\n\nflatpickr(input, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const pickedDate = selectedDates[0];\n\n            if (pickedDate <= new Date()) {\n                iziToast.error({\n                    message: \"Please choose a future date\",\n                    position: \"topRight\",\n                });\n                startBttn.disabled = true;\n                return;\n            }\n\n            userSelectedDate = pickedDate;\n            startBttn.disabled = false;\n        },\n});\n    \nstartBttn.addEventListener(\"click\", () => {\n    if (!userSelectedDate) return;\n\n    startBttn.disabled = true;\n    input.disabled = true;\n\n    timerId = setInterval(() => {\n        const now = new Date();\n        const diff = userSelectedDate - now;\n\n        if (diff <= 0) {\n            clearInterval(timerId);\n            updateTimer(0, 0, 0, 0);\n            input.disabled = false;\n            return;\n        }\n\n        const { days, hours, minutes, seconds } = convertMs(diff);\n        updateTimer(days, hours, minutes, seconds);\n    }, 1000);\n});\n\n    function updateTimer(days, hours, minutes, seconds) {\n        daysElem.textContent = addLeadingZero(days);\n        hoursElem.textContent = addLeadingZero(hours);\n        minutesElem.textContent = addLeadingZero(minutes);\n        secondsElem.textContent = addLeadingZero(seconds);\n    }\n    function addLeadingZero(value) {\n        return String(value).padStart(2, \"0\");\n    }\n\n    function convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["input","startBttn","daysElem","hoursElem","minutesElem","secondsElem","userSelectedDate","timerId","flatpickr","selectedDates","pickedDate","iziToast","diff","updateTimer","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"2GAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAY,SAAS,cAAc,cAAc,EAEjDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3DJ,EAAU,SAAW,GAErB,IAAIK,EAAmB,KACnBC,EAAU,KAEdC,EAAUR,EAAO,CACb,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQS,EAAe,CACnB,MAAMC,EAAaD,EAAc,CAAC,EAE9B,GAAIC,GAAc,IAAI,KAAQ,CAC1BC,EAAS,MAAM,CACX,QAAS,8BACT,SAAU,UAC9B,CAAiB,EACDV,EAAU,SAAW,GACrB,MACH,CAEDK,EAAmBI,EACnBT,EAAU,SAAW,EACxB,CACT,CAAC,EAEDA,EAAU,iBAAiB,QAAS,IAAM,CACjCK,IAELL,EAAU,SAAW,GACrBD,EAAM,SAAW,GAEjBO,EAAU,YAAY,IAAM,CAExB,MAAMK,EAAON,EADD,IAAI,KAGhB,GAAIM,GAAQ,EAAG,CACX,cAAcL,CAAO,EACrBM,EAAY,EAAG,EAAG,EAAG,CAAC,EACtBb,EAAM,SAAW,GACjB,MACH,CAED,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAI,EACxDC,EAAYC,EAAMC,EAAOC,EAASC,CAAO,CAC5C,EAAE,GAAI,EACX,CAAC,EAEG,SAASJ,EAAYC,EAAMC,EAAOC,EAASC,EAAS,CAChDf,EAAS,YAAciB,EAAeL,CAAI,EAC1CX,EAAU,YAAcgB,EAAeJ,CAAK,EAC5CX,EAAY,YAAce,EAAeH,CAAO,EAChDX,EAAY,YAAcc,EAAeF,CAAO,CACnD,CACD,SAASE,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CAED,SAASF,EAAUG,EAAI,CAQzB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}